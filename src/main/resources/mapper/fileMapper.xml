<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.file.dao.UploadDAO">
	<!-- <insert id="imageWrite" parameterType="uploadDTO">
	 	insert into upload(imageName, imageContent, imageFileName, imageOriginalFileName)
	 	values (#{imageName}, #{imageContent}, #{imageFileName}, #{imageOriginalFileName})
	 </insert> -->
	 
	 <!-- SQL문을 실행할 때, 넘어오는 파라메터 타입이 List일 경우
	 	  forEach 태그의 collection 속성에 사용할 수 있는 이름은 list 또는 collection이 가능하다 -->
	 <insert id="imageWrite" parameterType="uploadDTO">
	 	insert into upload(imageName, imageContent, imageFileName, imageOriginalFileName)
	 	values 
		 	<foreach collection="list" item="dto" separator=",">
		 		(#{dto.imageName}, #{dto.imageContent}, #{dto.imageFileName}, #{dto.imageOriginalFileName})
		 	</foreach>
	 </insert>
	 
	 <select id="imageList" resultType="uploadDTO">
		SELECT * 
	    FROM upload 
	    ORDER BY seq DESC 
	 </select>
	 
	 <select id="getImage" resultType="uploadDTO" parameterType="String">
		SELECT * 
	    FROM upload 
		where seq=#{seq}
	 </select>
	 
	 <select id="getImageFileName" resultType="String" parameterType="int">
	 	select imageFileName from upload where seq=#{seq}
	 </select>
	 
	 <update id="imageUpdate" parameterType="uploadDTO">
	 	update upload set imageName=#{imageName}, imageContent=#{imageContent}, imageFileName=#{imageFileName}, imageOriginalFileName=#{imageOriginalFileName}
	 	where seq=#{seq}
	 </update>
	 
	 <delete id="imageDelete" parameterType="List">
	 	delete from upload where seq in
	    <foreach collection="list" item="seq" open="(" separator="," close=")">
	        #{seq}
	    </foreach>
	 </delete>
</mapper>